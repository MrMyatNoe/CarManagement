<ng-template #mymodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">
      {{ modalDialogLabel }} Maintenance
    </h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    >
      <span aria-hidden="true">Ã—</span>
    </button>
  </div>

  <div class="modal-body">
    <form [formGroup]="maintenanceForm" (ngSubmit)="onSubmit()">
      <h1>Maintenance Form</h1>

      <div class="row from-row">
        <input
          class="col-sm-4 form-control"
          type="hidden"
          formControlName="id"
        />
      </div>

      <div class="row from-row">
        <label class="col-sm-4" for="carId">Car</label>
        <select
          formControlName="carId"
          class="form-control"
          [ngModel]="carId"
          (change)="car_change($event.target.value)"
        >
          <option
            *ngFor="let car of carsData"
            [selected]="car.id == carId"
            value="{{ car.id }}"
          >
            {{ car.carNo }}
          </option>
        </select>

        <div
          *ngIf="f.carId.invalid && (f.carId.dirty || f.carId.touched)"
          class="alert alert-danger"
        >
          <div *ngIf="f.carId.errors">Car is required.</div>
        </div>
      </div>
      <br />

      <div class="row from-row">
        <label class="col-sm-4">Shop</label>
        <input
          type="text"
          formControlName="shop"
          class="col-sm-4 form-control"
          placeholder="Enter Shop Name"
        />

        <div
          *ngIf="f.shop.invalid && (f.shop.dirty || f.shop.touched)"
          class="alert alert-danger"
        >
          <div *ngIf="f.shop.errors">Shop is required.</div>
        </div>
      </div>
      <br />

      <div class="row from-row">
        <label>Start Date</label>
        <input
          type="date"
          formControlName="startedDate"
          class="form-control"
          (change)="getDateDifference()"
        />
      </div>
      <br />

      <div class="row from-row">
        <label>End Date</label>
        <input
          type="date"
          formControlName="endDate"
          class="form-control"
          [ngModel]="endDate"
          (change)="getDateDifference()"
        />
      </div>
      <br />

      <div class="row from-row">
        <label class="col-sm-4">Days</label>
        <p>{{ days }}</p>
      </div>
      <br />

      <div class="row from-row">
        <label class="col-sm-4">Total</label>
        <input
          type="number"
          formControlName="total"
          class="col-sm-4 form-control"
          placeholder="Enter Total"
        />

        <div
          *ngIf="f.total.invalid && (f.total.dirty || f.total.touched)"
          class="alert alert-danger"
        >
          <div *ngIf="f.total.errors">Total Amount is required.</div>
        </div>
      </div>
      <br />

      <button
        type="submit"
        [disabled]="!maintenanceForm.valid"
        class="btn btn-primary"
      >
        {{ modalButtonLabel }}
      </button>
    </form>
  </div>
</ng-template>
<div class="mx-auto">
  <button class="btn btn-primary" (click)="newMaintenance()">New</button>
</div>
<div class="col-md-12">
  <pagination-controls
    previousLabel="Prev"
    nextLevel="Next"
    [responsive]="true"
    (pageChange)="handlePageChange($event)"
  ></pagination-controls>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>{{ "Car" | translate: param }}</th>
      <th>{{ "Shop" | translate: param }}</th>
      <th>{{ "Start Date" | translate: param }}</th>
      <th>{{ "End Date" | translate: param }}</th>
      <th>{{ "Days" | translate: param }}</th>
      <th>{{ "Total" | translate: param }}</th>
    </tr>
  </thead>
  <tr *ngFor="let maintenance of maintenanceData">
    <td>
      {{ maintenance.carNo }}
    </td>
    <td>
      {{ maintenance.shop }}
    </td>
    <td>
      {{ maintenance.startedDate }}
    </td>
    <td>
      {{ maintenance.endDate }}
    </td>
    <td>
      {{ maintenance.days }}
    </td>
    <td>
      {{ maintenance.total }}
    </td>
    <td>
      <button class="btn btn-info" (click)="editMaintenance(maintenance)">
        Edit
      </button>
    </td>
    <td>
      <button class="btn btn-info">Delete</button>
    </td>
  </tr>
</table>
<div class="mt-3 col-md-6">
  Items per page :
  <select (change)="handlePageSizeChange($event)">
    <option *ngFor="let pageSize of pageSizes" [ngValue]="pageSize">
      {{ pageSize }}
    </option>
  </select>
</div>
